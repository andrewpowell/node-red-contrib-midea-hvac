<script type="text/html" data-template-name="midea-cloud-account">

  <div class="form-row">
    <label for="node-config-input-name"><i class="fa fa-tag"></i> Name</label>
    <input type="text" id="node-config-input-name" placeholder="Name">
  </div>

  <div class="form-row">
    <label for="node-config-input-username"><i class="fa fa-user"></i> Username</label>
    <input type="text" id="node-config-input-username" placeholder="Username">
  </div>

  <div class="form-row">
    <label for="node-config-input-password"><i class="fa fa-lock"></i> Password</label>
    <input type="password" id="node-config-input-password" placeholder="password">
  </div>

  <!-- <div class="form-row">
    <label for="node-config-input-token"><i class="fa fa-globe"></i> Token</label>
    <input type="text" id="node-config-input-token" placeholder="Access Token">
  </div>

  <div class="form-row">
    <label for="node-config-input-session"><i class="fa fa-globe"></i> Session</label>
    <input type="text" id="node-config-input-session" placeholder="Session Id">
  </div> -->

</script>

<script type="text/javascript">
  RED.nodes.registerType('midea-cloud-account', {
    category: 'config',
    defaults: {
      name: { value: '' },
      username: { value: '', required: true },
      password: { value: '', required: true },
      // token: { value: '' },
      // session: { value: '' }
    },
    label: function () {
      return (this.name || this.username || 'midea cloud account');
    },
    oneditprepare: function () {
      // let node = this;

      // $('#node-config-input-password').on('change', function () {
      //   let username = $('#node-config-input-username').val();
      //   let password = $('#node-config-input-password').val();

      //   if (username != node.username || password != node.password) {
      //     RED.notify('Try Authentication');

      //     $.getJSON('/midea/cloud/login', {
      //       controller: node.id,
      //       username: username,
      //       password: password
      //     }).done(function (data, textStatus, jqXHR) {
      //       console.log(data);
      //       if (!data.error) {
      //         RED.notify('Successful Authentication', 'success');
      //       } else {
      //         RED.notify(data.error, 'error');
      //       }
      //     });
      //   }
      // });
    }
  });
</script>